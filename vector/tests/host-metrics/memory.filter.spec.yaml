tests:
  - name: Host Metrics | Memory | Filter | should keep specific metrics
    inputs:
      - insert_at: filter_unwanted_memory_host_metrics
        type: metric
        metric:
          name: memory_total_bytes
          namespace: host
          timestamp: '2022-05-12T17:18:12.678580956Z'
          kind: absolute
          counter:
            value: 6515618
          tags:
            collector: memory
    outputs:
      - extract_from: filter_unwanted_memory_host_metrics
        conditions:
          - type: vrl
            source: |
              assert_eq!(.name, "memory_total_bytes")
  - name: Host Metrics | Memory | Filter | should filter out undesired metrics
    inputs:
      - insert_at: filter_unwanted_memory_host_metrics
        type: metric
        metric:
          name: memory_buffers_bytes
          namespace: host
          timestamp: '2022-05-12T17:18:12.678580956Z'
          kind: absolute
          counter:
            value: 6515618
          tags:
            collector: memory
    no_outputs_from:
      - filter_unwanted_memory_host_metrics
